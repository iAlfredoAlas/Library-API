/*================================================================================*/
/* DDL SCRIPT                                                                     */
/*================================================================================*/
/*  Title    :                                                                    */
/*  FileName : LibraryModel.ecm                                                   */
/*  Platform : MySQL 5.6                                                          */
/*  Version  : Concept                                                            */
/*  Date     : martes, 11 de julio de 2023                                        */
/*================================================================================*/
/*================================================================================*/
/* CREATE TABLES                                                                  */
/*================================================================================*/

CREATE TABLE author (
  idAuthor INT AUTO_INCREMENT NOT NULL,
  nameAuthor VARCHAR(40) NOT NULL,
  countryBirth VARCHAR(20) NOT NULL,
  dateBorn DATE NOT NULL,
  statusAuthor BOOL NOT NULL,
  CONSTRAINT PK_author PRIMARY KEY (idAuthor)
);

CREATE TABLE editorial (
  idEditorial INT AUTO_INCREMENT NOT NULL,
  nameEditorial VARCHAR(40) NOT NULL,
  dateAdd DATE NOT NULL,
  statusEditorial BOOL NOT NULL,
  CONSTRAINT PK_editorial PRIMARY KEY (idEditorial)
);

CREATE TABLE genre (
  idGenre INT AUTO_INCREMENT NOT NULL,
  nameGenre VARCHAR(40) NOT NULL,
  statusGenre BOOL NOT NULL,
  CONSTRAINT PK_genre PRIMARY KEY (idGenre)
);

CREATE TABLE rack (
  idRack INT AUTO_INCREMENT NOT NULL,
  nameRack VARCHAR(40) NOT NULL,
  levels INT NOT NULL,
  statusRack BOOL NOT NULL,
  CONSTRAINT PK_rack PRIMARY KEY (idRack)
);

CREATE TABLE book (
  idBook INT AUTO_INCREMENT NOT NULL,
  bookName VARCHAR(40) NOT NULL,
  publicationDate DATE NOT NULL,
  totalPague INT NOT NULL,
  quantityStock INT NOT NULL,
  bookCover TEXT NOT NULL,
  statusBook BOOL NOT NULL,
  idAuthor INT NOT NULL,
  idEditorial INT NOT NULL,
  idGenre INT NOT NULL,
  idRack INT NOT NULL,
  CONSTRAINT PK_book PRIMARY KEY (idBook)
);

CREATE TABLE employee (
  idEmployee INT AUTO_INCREMENT NOT NULL,
  nameEmployee VARCHAR(40) NOT NULL,
  employeeNumber VARCHAR(40) NOT NULL,
  statusEmployee BOOL NOT NULL,
  CONSTRAINT PK_employee PRIMARY KEY (idEmployee)
);

CREATE TABLE user (
  idUser INT AUTO_INCREMENT NOT NULL,
  nameUser VARCHAR(40) NOT NULL,
  carnetUser VARCHAR(10) NOT NULL,
  emailUser VARCHAR(40) NOT NULL,
  phoneUser VARCHAR(11) NOT NULL,
  statusUser BOOL NOT NULL,
  CONSTRAINT PK_user PRIMARY KEY (idUser)
);

CREATE TABLE reserve (
  idReservation INT AUTO_INCREMENT NOT NULL,
  dateReservation DATE NOT NULL,
  statusReservation BOOL NOT NULL,
  idBook INT NOT NULL,
  idEmployee INT NOT NULL,
  idUser INT NOT NULL,
  CONSTRAINT PK_reserve PRIMARY KEY (idReservation)
);

/*================================================================================*/
/* CREATE FOREIGN KEYS                                                            */
/*================================================================================*/

ALTER TABLE book
  ADD CONSTRAINT FK_book_author
  FOREIGN KEY (idAuthor) REFERENCES author (idAuthor);

ALTER TABLE book
  ADD CONSTRAINT FK_book_editorial
  FOREIGN KEY (idEditorial) REFERENCES Editorial (idEditorial);

ALTER TABLE book
  ADD CONSTRAINT FK_book_genre
  FOREIGN KEY (idGenre) REFERENCES genre (idGenre);

ALTER TABLE book
  ADD CONSTRAINT FK_book_rack
  FOREIGN KEY (idRack) REFERENCES rack (idRack);

ALTER TABLE reserve
  ADD CONSTRAINT FK_reserve_book
  FOREIGN KEY (idBook) REFERENCES book (idBook);

ALTER TABLE reserve
  ADD CONSTRAINT FK_reserve_employee
  FOREIGN KEY (idEmployee) REFERENCES employee (idEmployee);

ALTER TABLE reserve
  ADD CONSTRAINT FK_reserve_user
  FOREIGN KEY (idUser) REFERENCES user (idUser);
